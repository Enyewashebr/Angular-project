<div class="card">
  <div class="header-row">
    <h2>Orders List</h2>
    <a class="btn primary" routerLink="/orders/create">New Order</a>
  </div>

  <div class="stats" *ngIf="vm$ | async as vm">
    <div class="stat">
      <div class="label">Sales Today</div>
      <div class="value">${{ vm.salesToday | number:'1.2-2' }}</div>
    </div>
    <div class="stat">
      <div class="label">Sales This Month</div>
      <div class="value">${{ vm.salesThisMonth | number:'1.2-2' }}</div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Order ID</th>
        <th>Customer</th>
        <th>Date</th>
        <th>Items</th>
        <th>Total</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let o of (vm$ | async)?.rows; let i = index">
        <td>{{ i + 1 }}</td>
        <td>#{{ o.id }}</td>
        <td>{{ o.customerName }}</td>
        <td>{{ o.createdAt | date:'medium' }}</td>
        <td>{{ o.items.length }}</td>
        <td>${{ o.total | number:'1.2-2' }}</td>
        <td class="actions">
          <a class="btn small" [routerLink]="['/orders/details', o.id]">Details</a>
          <button class="btn small danger" (click)="delete(o.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
